# INTONATION TRAINER

### Video Demo: <paste url here>

### Description:

The Intonation Trainer is a unique and useful tool for middle school and high school band directors and students. While there are several websites that already provide useful intonation training practice, they are limited in design towards more general purposes rather than being specifically designed with band students in mind. When I started designing the Intonation Trainer web app, I wanted something that would be completely aligned with students' learning experiences in a concert band setting. 

Many students begin their journeys using some kind of a band method book, in which "the first five notes" are usually taught first: concert Bb, C, D, Eb, and F. However, the actual octaves of each pitch depend on which instrument is being played. Only the flute is learning F5, while altos, clarinets, and trumpets are learning F4, trombones and baritones are learning F3, and tubas are learning F2. The Intonation Trainer is therefore primarily unique in that it uses sampled sounds of each instrument and compares various octaves (and sometimes unisons) together, rather than just using a generated sine wave, piano note, or guitar string that have been used in other intonation trainers.

The Intonation Trainer is also unique because of how it presents the sounds: first played simultaneously in order to listen for the "waves" that identify an out-of-tune pair of notes, and then staggerd in order to identify whether the out-of-tune note is too high or too low (sharp or flat). The game uses an adaptive difficulty setting so that students will receive harder questions (closer to being in tune) when they choose the correct answer, and vice versa. Students can also select which instruments and intervals they would like to use, and they can choose between three game modes: timed, challenge, and freeplay. There is also an experimental mode that teachers can use to demonstrate in- and out-of-tune with controlled variables.

### Design Process:

I chose to use HTML, CSS, and JavaScript to create this program in Notepad. One of my biggest design decisions was in trying to figure out how to create the audio files and play them back with precise control over the intonation. After many different approaches, I finally settled on using the TonalEnergy app to play through the entire chromatic range of each instrument while recording the sounds in Audacity, and then slicing each track into individual 4.5 second .mp3 files for each note. I learned about using the Web Audio API to create and modify the Audio Context, randomly selecting instruments and pitches to play, and changing the playback rate by using the equation `playbackRate = 2^(detuneAmount/1200)`.

Changing the playback rate to control intonation works for two reasons. First, when you increase the playback rate of a note that has a frequency of 100 Hz by 1%, it will result in a note that has a frequency of 101 Hz, and if you decrease the playback rate by 1%, it will result in a note that has a frequency of 99 Hz. Second, you have to understand that doubling the frequency of a note results in a second note that is perfectly in tune an octave higher. Since there are twelve half-steps in a one-octave chromatic scale, and there are 100 cents between each note, there are 1200 cents in the chromatic scale.
For example, if we want to change a note so that it is 15 cents sharp, we would use `playbackRate = 2^(15/1200)` which is equal to 1.0087, or a .87% increase in the playback rate.

For the game design, I decided to follow the same approach that I commonly use with my band students when they are learning about intonation. First, one person plays along with a tuning drone, and the class listens for "waves" to know if that person is in tune. If they are not in tune, the next step is to figure out whether that person is sharp or flat so that they can make the proper adjustments. In the Intonation Trainer, the first part of each round is when both pitches are played together, with a 50% chance that they will be out of tune. When they are out of tune, the second part of the round starts with the "reference pitch", followed by the out-of-tune pitch, and the user must guess if the second note was sharp or flat. With the minimum viable product in place, I added several options to the menu such as difficulty, game mode, interval choice, and instrument selection, and then worked to make the user interface more helpful and intuitive.

### Reflection on learning:

CS50 has been my first experience with Computer Science, something I have always been interested in since I was a teenager, but never had found the opportunity to pursue. I was not afraid to take on a large project like the Intonation Trainer - in fact, I wanted to make sure that I created something that would not only develop my skills and knowledge as an amateur computer programmer, but would also be useful in my current career of music education. This project took me over 4 months and around 200 hours of work to complete.

I learned about the importance of making good project design decisions to limit the scope of a project, as well as the importance of writing good, clean code so that it's easy to develop new features and change old ones. Unfortunately, my code is quite a bit of a mess, as it is all contained in a single .html document. Part of the reason why I stopped working on adding a few more features like replaying missed questions on the results screen was that it was getting hard to work with. If I do continue working on this project in the future, one of my major goals is to clean up the code so that it is a lot easier to make changes. 

I also learned a lot about how to use AI and Google as a resource for coding, including the limitations of AI which sometimes made silly mistakes or left out important details (like how devices will reject Audio Contexts if they are created on page load, rather than when the user interacts with the page). I always tried to ask probing questions when I encountered new syntax and Javascript methods, and I would frequently create educational mini-projects to make sure that I could grasp important concepts, rather than just copy and paste the code that was provided.

And finally, one important lesson that I learned from all of CS50 (this project included) is that coding is a messy business, and that there is always more than one way to skin a cat - and almost certainly, someone out there has found a neater way to do it than me, but that doesn't mean that I shouldn't try it anyway! I'm sure that there are hundreds of ways to improve my Intonation Trainer, but there are thousands of things that I have learned by making it!

